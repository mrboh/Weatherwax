(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;$.Define($$,{IntelliFactory:{Formlets:{Base:{D:$.Class({Dispose:function(){return null;}},{New:function(){return $.New(this,{});}}),Form:$.Class({Dispose:function(){return this.Dispose1.call(null,null);}}),Formlet:$.Class({Build:function(){return this.Build1.call(null,null);},MapResult:function(q){var t=this;return $.New(c,{Layout:this.Layout,Build1:function(){var s,u,v,w,y;s=t.Build1.call(null,null);u=t.Utils.Reactive;v=s.State;w=function(x){return q(x);};u.Select(v,w);y=s.State;return $.New(d,{Body:s.Body,Dispose1:s.Dispose1,Notify:s.Notify,State:y});},Utils:t.Utils});},get_Layout:function(){return this.Layout;}}),FormletBuilder:$.Class({Bind:function(z,A){var B;B=this.F;return B.Bind(z,A);},Delay:function(C){return this.F.Delay(C);},Return:function(D){return this.F.Return(D);},ReturnFrom:function(E){return E;}},{New:function(F){var G;G=$.New(this,{});G.F=F;return G;}}),FormletProvider:$.Class({AppendLayout:function(H,I){var J;J=this.ApplyLayout(I);return this.WithLayout(H,J);},Apply:function(K,L){var M,P=this;M=function(){var O,Q,R,S,T,V,W,X,Y,_0,_1,_2,_3,_4,_5,_6,_9;O=P.BuildForm(K);Q=P.BuildForm(L);R=P.U.Reactive;S=O.Body;T=function(U){return $.New(f,{$:1,$0:U});};V=R.Select(S,T);W=P.U.Reactive;X=Q.Body;Y=function(Z){return $.New(f,{$:2,$0:Z});};_0=W.Select(X,Y);_1=P.U.Reactive;_2=_1.Merge(V,_0);_3=P.U.Reactive;_4=Q.State;_5=O.State;_6=function(_7){return function(_8){return g.Apply(_8,_7);};};_9=_3.CombineLatest(_4,_5,_6);return $.New(d,{Body:_2,Dispose1:function(){Q.Dispose1.call(null,null);return O.Dispose1.call(null,null);},Notify:function(ba){Q.Notify.call(null,ba);return O.Notify.call(null,ba);},State:_9});};return P.New(M);},ApplyLayout:function(ba){var bb,bi=this;bb=function(){var bd,be,bf,bg,bh;bd=ba.Build();be=ba.get_Layout().Apply.call(null,bd.Body);if(be.$==0){bg=bd.Body;}else{be.$0[1];bh=be.$0[0];bg=bi.U.Reactive.Return(e.Set(bh));}bf=bg;return $.New(d,{Body:bf,Dispose1:bd.Dispose1,Notify:bd.Notify,State:bd.State});};return bi.New(bb);},Bind:function(bj,bk){var bl;bl=this.Map(bk,bj);return this.Join(bl);},BindWith:function(bm,bn,bo){var bp,bs=this;bp=function(){var br,bt,bu,bv,bw,by,bz,bA,bB,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM;br=bs.Bind(bn,bo);bt=br.Build();bu=bs.U.Reactive;bv=bt.Body;bw=function(bx){return bx.$==1?true:false;};by=bs.U.DefaultLayout.Apply.call(null,bu.Where(bv,bw));bz=bs.U.Reactive;bA=bt.Body;bB=function(bC){return bC.$==2?true:false;};bD=bs.U.DefaultLayout.Apply.call(null,bz.Where(bA,bB));bE=[by,bD];if(bE[0].$==1){if(bE[1].$==1){bI=bE[0].$0[0];bJ=bE[1].$0[0];bK=bs.U.Reactive;bL=(bm(bI))(bJ);bM=e.Set(bL);bH=bK.Return(bM);}else{bH=bs.U.Reactive.Never();}bG=bH;}else{bG=bs.U.Reactive.Never();}bF=bG;return $.New(d,{Body:bF,Dispose1:bt.Dispose1,Notify:bt.Notify,State:bt.State});};return bs.New(bp);},BuildForm:function(bN){var bO,bP,bQ,bR,bS;bO=bN.Build();bP=bN.get_Layout().Apply.call(null,bO.Body);if(bP.$==1){bR=bP.$0[1];bS=bP.$0[0];bQ=$.New(d,{Body:this.U.Reactive.Return(e.Set(bS)),Dispose1:function(){bO.Dispose1.call(null,null);return bR.Dispose();},Notify:bO.Notify,State:bO.State});}else{bQ=bO;}return bQ;},Delay:function(bU){var bV,bX=this;bV=function(){return bX.BuildForm(bU(null));};return $.New(c,{Layout:bX.L.Delay(function(){return bU(null).get_Layout();}),Build1:bV,Utils:bX.U});},Deletable:function(bZ){var b0,b4=this;b0=function(b1){var b2,b3;if(b1.$==1){b3=b1.$0;b2=b4.Return({$:1,$0:b3});}else{b2=b4.ReturnEmpty({$:0});}return b2;};return b4.Replace(bZ,b0);},Empty:function(){var b5,b7=this;b5=function(){return $.New(d,{Body:b7.U.Reactive.Return(e.Delete()),Dispose1:function(){},Notify:function(){},State:b7.U.Reactive.Never()});};return b7.New(b5);},EmptyForm:function(){return $.New(d,{Body:this.U.Reactive.Never(),Dispose1:function(){},Notify:function(){},State:this.U.Reactive.Never()});},Fail:function(ca){return $.New(d,{Body:this.U.Reactive.Never(),Dispose1:function(cb){return cb;},Notify:function(){},State:this.U.Reactive.Return($.New(g,{$:1,$0:ca}))});},FailWith:function(cd){var ce,cg=this;ce=function(){return cg.Fail(cd);};return cg.New(ce);},FlipBody:function(ch){var ci,cm=this,cr,cs;ci=function(){var ck,cl,cn,co,cq;ck=ch.Build();cl=cm.U.Reactive;cn=ck.Body;co=function(cp){return e.FlipEdit(cp);};cq=cl.Select(cn,co);return $.New(d,{Body:cq,Dispose1:ck.Dispose1,Notify:ck.Notify,State:ck.State});};cr=cm.New(ci);cs=ch.get_Layout();return cm.WithLayout(cs,cr);},FromState:function(ct){var cu,cw=this;cu=function(){return $.New(d,{Body:cw.U.Reactive.Never(),Dispose1:function(){},Notify:function(){},State:ct});};return cw.New(cu);},InitWith:function(cz,cA){var cB,cF=this,cJ,cK;cB=function(){var cD,cE,cG,cH,cI;cD=cA.Build();cE=cF.U.Reactive;cG=cF.U.Reactive.Return($.New(g,{$:0,$0:cz}));cH=cD.State;cI=cE.Concat(cG,cH);return $.New(d,{Body:cD.Body,Dispose1:cD.Dispose1,Notify:cD.Notify,State:cI});};cJ=cF.New(cB);cK=cA.get_Layout();return cF.WithLayout(cK,cJ);},InitWithFailure:function(cL){var cM,cQ=this,cU,cV;cM=function(){var cO,cP,cR,cS,cT;cO=cL.Build();cP=cQ.U.Reactive;cR=cQ.U.Reactive.Return($.New(g,{$:1,$0:$.New(j,{$:0})}));cS=cO.State;cT=cP.Concat(cR,cS);return $.New(d,{Body:cO.Body,Dispose1:cO.Dispose1,Notify:cO.Notify,State:cT});};cU=cQ.New(cM);cV=cL.get_Layout();return cQ.WithLayout(cV,cU);},Join:function(cW){var cX,c0=this;cX=function(){var cZ,c1,c2,c3,c8,c9,c_,c$,da,df,dg,dh,di,dk,dl,dm,dn,_do,dq,dr,ds,dt,du,dw,dy;cZ=c0.BuildForm(cW);c1=c0.U.Reactive;c2=cZ.State;c3=function(c4){var c5,c6,c7;if(c4.$==1){c6=c4.$0;c5=c0.Fail(c6);}else{c7=c4.$0;c5=c0.BuildForm(c7);}return c5;};c8=c0.U.Reactive;c9=c1.Select(c2,c3);c_=c8.Heat(c9);c$=c0.U.Reactive;da=function(db){var dc,dd,de;dc=c0.U.Reactive.Return(e.Delete());dd=c0.U.Reactive;de=db.Body;return dd.Concat(dc,de);};df=c$.Select(c_,da);dg=c0.U.Reactive;dh=c0.U.Reactive.Switch(df);di=function(dj){return $.New(f,{$:2,$0:dj});};dk=dg.Select(dh,di);dl=c0.U.Reactive;dm=c0.U.Reactive;dn=cZ.Body;_do=function(dp){return $.New(f,{$:1,$0:dp});};dq=dm.Select(dn,_do);dr=dl.Merge(dq,dk);dt=c0.U.Reactive;du=function(dv){return dv.State;};ds=c0.U.Reactive.Switch(dt.Select(c_,du));dw=function(dx){return cZ.Notify.call(null,dx);};dy=function(){return cZ.Dispose1.call(null,null);};return $.New(d,{Body:dr,Dispose1:dy,Notify:dw,State:ds});};return c0.New(cX);},LiftResult:function(dA){var dB;dB=function(dC){return $.New(g,{$:0,$0:dC});};return this.MapResult(dB,dA);},Map:function(dD,dE){var dF;dF=function(dG){return g.Map(dD,dG);};return this.MapResult(dF,dE);},MapBody:function(dH,dI){var dJ,dO=this;dJ={Apply:function(dK){var dL,dM,dN,dP,dQ,dR,dS,dT;dL=dI.get_Layout().Apply.call(null,dK);if(dL.$==0){dN=dO.U.DefaultLayout.Apply.call(null,dK);if(dN.$==0){dP={$:0};}else{dQ=dN.$0[1];dR=dN.$0[0];dP={$:1,$0:[dH(dR),dQ]};}dM=dP;}else{dS=dL.$0[1];dT=dL.$0[0];dM={$:1,$0:[dH(dT),dS]};}return dM;}};return dO.WithLayout(dJ,dI);},MapResult:function(dU,dV){var dW,d0=this;dW=function(){var dY,dZ,d1,d2,d4;dY=dV.Build();dZ=d0.U.Reactive;d1=dY.State;d2=function(d3){return dU(d3);};d4=dZ.Select(d1,d2);return $.New(d,{Body:dY.Body,Dispose1:dY.Dispose1,Notify:dY.Notify,State:d4});};return $.New(c,{Layout:dV.get_Layout(),Build1:dW,Utils:d0.U});},Never:function(){var d5,d7=this;d5=function(){return $.New(d,{Body:d7.U.Reactive.Never(),Dispose1:function(){},Notify:function(){},State:d7.U.Reactive.Never()});};return d7.New(d5);},New:function(d_){return $.New(c,{Layout:this.L.Default(),Build1:d_,Utils:this.U});},Replace:function(d$,ea){var eb,ed;eb=function(ec){return ea(ec);};ed=this.Map(eb,d$);return this.Switch(ed);},ReplaceFirstWithFailure:function(ee){var ef,ej=this,ep,eq;ef=function(){var eh,ei,ek,el,em,en,eo;eh=ee.Build();ei=ej.U.Reactive;ek=eh.State;el=ei.Drop(ek,1);em=ej.U.Reactive;en=ej.U.Reactive.Return($.New(g,{$:1,$0:$.New(j,{$:0})}));eo=em.Concat(en,el);return $.New(d,{Body:eh.Body,Dispose1:eh.Dispose1,Notify:eh.Notify,State:eo});};ep=ej.New(ef);eq=ee.get_Layout();return ej.WithLayout(eq,ep);},Return:function(er){var es,eu=this;es=function(){return $.New(d,{Body:eu.U.Reactive.Never(),Dispose1:function(ev){return ev;},Notify:function(){},State:eu.U.Reactive.Return($.New(g,{$:0,$0:er}))});};return eu.New(es);},ReturnEmpty:function(ex){var ey,eA=this;ey=function(){return $.New(d,{Body:eA.U.Reactive.Return(e.Delete()),Dispose1:function(eB){return eB;},Notify:function(){},State:eA.U.Reactive.Return($.New(g,{$:0,$0:ex}))});};return eA.New(ey);},SelectMany:function(eD){var eE,eH=this;eE=function(){var eG,eI,eJ,eK,eP,eQ,eR,eS,eT,eU,eW,eX,eZ,e4,e5,e_,e$,fa,fb,fc,fd,ff,fg,fh,fi,fk,fl,fn;eG=eH.BuildForm(eD);eI=eH.U.Reactive;eJ=eG.State;eK=function(eL){var eM,eN,eO;if(eL.$==1){eL.$0;eM={$:0};}else{eN=eL.$0;eO=eH.BuildForm(eN);eM={$:1,$0:eO};}return eM;};eP=eH.U.Reactive;eQ=eI.Choose(eJ,eK);eR=eP.Heat(eQ);eS=eH.U.Reactive;eT=eG.Body;eU=function(eV){return $.New(f,{$:1,$0:eV});};eW=eS.Select(eT,eU);eX={contents:function(eY){return $.New(f,{$:1,$0:eY});}};eZ=function(){var e1;e1=eX.contents;eX.contents=function(e2){var e3;e3=e1(e2);return $.New(f,{$:2,$0:e3});};return;};e4=eH.U.Reactive;e5=function(e6){var e7,e8,e9;eZ(null);e7=eX.contents;e8=eH.U.Reactive;e9=e6.Body;return e8.Select(e9,e7);};e_=e4.Select(eR,e5);e$=eH.U.Reactive.SelectMany(e_);fa=eH.U.Reactive;fb=fa.Merge(eW,e$);fc=eH.U.Reactive;fd=function(fe){return fe.State;};ff=fc.Select(eR,fd);fg=eH.U.Reactive;fh=eH.U.Reactive.CollectLatest(ff);fi=function(fj){return g.Sequence(fj);};fk=fg.Select(fh,fi);fl=function(fm){return eG.Notify.call(null,fm);};fn=function(){return eG.Dispose1.call(null,null);};return $.New(d,{Body:fb,Dispose1:fn,Notify:fl,State:fk});};return eH.New(eE);},Sequence:function(fp){var fq,fr,fs,ft,fu,fx,fy;fq=i.ofSeq(fp);if(fq.$==1){fs=fq.$1;ft=fq.$0;fu=this.Return(function(fv){return function(fw){return $.New(j,{$:1,$0:fv,$1:fw});};});fx=this.Sequence(fs);fy=this.Apply(fu,ft);fr=this.Apply(fy,fx);}else{fr=this.Return($.New(j,{$:0}));}return fr;},Switch:function(fz){var fA,fD=this;fA=function(){var fC,fE,fF,fG,fH,fI,fN,fO,fP,fQ,fR,fS,fT,fU,fW,fX,fY,fZ,f1,f3;fC=fD.WithLayoutOrDefault(fz);fE=fD.ApplyLayout(fC);fF=fD.BuildForm(fE);fG=fD.U.Reactive;fH=fF.State;fI=function(fJ){var fK,fL,fM;if(fJ.$==1){fJ.$0;fK={$:0};}else{fL=fJ.$0;fM=fD.BuildForm(fL);fK={$:1,$0:fM};}return fK;};fN=fD.U.Reactive;fO=fG.Choose(fH,fI);fP=fN.Heat(fO);fQ=fD.U.Reactive;fR=fF.Body;fT=fD.U.Reactive;fU=function(fV){return fV.Body;};fS=fD.U.Reactive.Switch(fT.Select(fP,fU));fW=fQ.Concat(fR,fS);fY=fD.U.Reactive;fZ=function(f0){return f0.State;};fX=fD.U.Reactive.Switch(fY.Select(fP,fZ));f1=function(f2){return fF.Notify.call(null,f2);};f3=function(){return fF.Dispose1.call(null,null);};return $.New(d,{Body:fW,Dispose1:f3,Notify:f1,State:fX});};return fD.New(fA);},WithCancelation:function(f5,f6){var f7,gd,ge,gf,gg,gh,gj;f7=function(f8){return function(f9){var f_,f$,ga,gb,gc;f_=[f8,f9];if(f_[1].$==0){f$=$.New(g,{$:0,$0:{$:0}});}else{if(f_[0].$==1){gb=f_[0].$0;ga=$.New(g,{$:1,$0:gb});}else{gc=f_[0].$0;ga=$.New(g,{$:0,$0:{$:1,$0:gc}});}f$=ga;}return f$;};};gd=this.Return(f7);ge=this.LiftResult(f5);gf=this.LiftResult(f6);gg=this.Apply(gd,ge);gh=function(gi){return g.Join(gi);};gj=this.Apply(gg,gf);return this.MapResult(gh,gj);},WithLayout:function(gk,gl){return $.New(c,{Layout:gk,Build1:function(){return gl.Build();},Utils:this.U});},WithLayoutOrDefault:function(gn){var go;go=function(gp){return gp;};return this.MapBody(go,gn);},WithNotification:function(gq,gr){var gs,gv=this,gy,gz;gs=function(){var gu,gw;gu=gv.BuildForm(gr);gw=function(gx){gu.Notify.call(null,gx);return gq(gx);};return $.New(d,{Body:gu.Body,Dispose1:gu.Dispose1,Notify:gw,State:gu.State});};gy=gv.New(gs);gz=gr.get_Layout();return gv.WithLayout(gz,gy);},WithNotificationChannel:function(gA){var gB,gF=this,gN,gO;gB=function(){var gD,gE,gG,gH,gJ,gL,gM;gD=gA.Build();gE=gF.U.Reactive;gG=gD.State;gH=function(gI){return[gI,gD.Notify];};gJ=function(gK){return g.Map(gH,gK);};gL=gE.Select(gG,gJ);gM=gD.Notify;return $.New(d,{Body:gD.Body,Dispose1:gD.Dispose1,Notify:gM,State:gL});};gN=gF.New(gB);gO=gA.get_Layout();return gF.WithLayout(gO,gN);}},{New:function(gP){var gQ;gQ=$.New(this,{});gQ.U=gP;gQ.L=k.New({Reactive:gQ.U.Reactive});return gQ;}}),LayoutUtils:$.Class({Default:function(){return{Apply:function(){return{$:0};}};},Delay:function(gS){return{Apply:function(gT){return gS(null).Apply.call(null,gT);}};},New:function(gU){return{Apply:function(gV){var gW,gX,gY;gW=gU(null);gX={contents:$.New(l,{$:0})};gY=m.subscribeTo(gV,function(gZ){var g0,g1,g2,g3;g0=e.ReplacedTree(gZ,gX.contents);gX.contents=e.Apply(gZ,gX.contents);g1=e.Range(gZ,gX.contents);g2=g1[0];gW.Remove.call(null,g0.get_Sequence());g3=function(g4){return function(g5){return(gW.Insert.call(null,g2+g4))(g5);};};return n.iteri(g3,gZ);});return{$:1,$0:[gW.Body,gY]};}};}},{New:function(){return $.New(this,{});}}),Result:$.Class({},{Apply:function(g7,g8){var g9,g_,g$,ha,hb,hc,hd,he,hf,hg;g9=[g7,g8];if(g9[0].$==1){if(g9[1].$==1){ha=g9[0].$0;hb=g9[1].$0;g$=$.New(g,{$:1,$0:i.append(ha,hb)});}else{hc=g9[0].$0;g$=$.New(g,{$:1,$0:hc});}g_=g$;}else{if(g9[1].$==1){g9[0].$0;he=g9[1].$0;hd=$.New(g,{$:1,$0:he});}else{hf=g9[0].$0;hg=g9[1].$0;hd=$.New(g,{$:0,$0:hf(hg)});}g_=hd;}return g_;},Join:function(hh){var hi,hj,hk;if(hh.$==1){hj=hh.$0;hi=$.New(g,{$:1,$0:hj});}else{hk=hh.$0;hi=hk;}return hi;},Map:function(hl,hm){var hn,ho,hp;if(hm.$==1){ho=hm.$0;hn=$.New(g,{$:1,$0:ho});}else{hp=hm.$0;hn=$.New(g,{$:0,$0:hl(hp)});}return hn;},OfOption:function(hq){var hr,hs;if(hq.$==0){hr=$.New(g,{$:1,$0:$.New(j,{$:0})});}else{hs=hq.$0;hr=$.New(g,{$:0,$0:hs});}return hr;},Sequence:function(ht){var hu;hu=function(hv){return function(hw){var hx,hy,hz,hA,hB,hC,hD,hE,hF;if(hv.$==1){hy=hv.$0;if(hw.$==1){hA=hw.$0;hz=$.New(g,{$:1,$0:i.append(hy,hA)});}else{hw.$0;hz=$.New(g,{$:1,$0:hy});}hx=hz;}else{hB=hv.$0;if(hw.$==1){hD=hw.$0;hC=$.New(g,{$:1,$0:hD});}else{hE=hw.$0;hF=i.ofArray([hE]);hC=$.New(g,{$:0,$0:i.append(hB,hF)});}hx=hC;}return hx;};};return n.fold(hu,$.New(g,{$:0,$0:$.New(j,{$:0})}),ht);}}),Tree:{Apply:function(hG,hH){var hI;hI=function(hJ,hK){var hL,hM,hN,hO,hP,hQ,hR,hS,hT,hU;if(hJ.$==1){hM=hJ.$0;if(hK.$==2){hO=hK.$1;hP=hK.$0;hN=$.New(l,{$:2,$0:hI(hM,hP),$1:hO});}else{hN=hI($.New(f,{$:1,$0:hM}),$.New(l,{$:2,$0:$.New(l,{$:0}),$1:hK}));}hL=hN;}else{if(hJ.$==2){hQ=hJ.$0;if(hK.$==2){hS=hK.$1;hT=hK.$0;hR=$.New(l,{$:2,$0:hT,$1:hI(hQ,hS)});}else{hR=hI($.New(f,{$:2,$0:hQ}),$.New(l,{$:2,$0:hK,$1:$.New(l,{$:0})}));}hL=hR;}else{hU=hJ.$0;hL=hU;}}return hL;};return hI(hG,hH);},Count:function(hV){var hW,hX,hY,hZ,h0,h1,h2,h3,h4,h5,h6,h7,h8;hW=[];hX=$.New(j,{$:0});hW[3]=hV;hW[2]=hX;hW[1]=0;hW[0]=1;while(hW[0]){if(hW[3].$==2){hZ=hW[3].$1;h0=hW[3].$0;h1=$.New(j,{$:1,$0:hZ,$1:hW[2]});h2=hW[1];hW[3]=h0;hW[2]=h1;hW[1]=h2;hY=void(hW[0]=1);}else{h3=hW[3];h4=h3.$==0?0:1;if(hW[2].$==1){h6=hW[2].$1;h7=hW[2].$0;h8=hW[1]+h4;hW[3]=h7;hW[2]=h6;hW[1]=h8;h5=void(hW[0]=1);}else{hW[0]=0;h5=void(hW[1]=hW[1]+h4);}hY=h5;}}return hW[1];},DeepFlipEdit:function(h9){var h_,h$,ia,ib;if(h9.$==1){h$=h9.$0;h_=$.New(f,{$:2,$0:e.DeepFlipEdit(h$)});}else{if(h9.$==2){ia=h9.$0;h_=$.New(f,{$:1,$0:e.DeepFlipEdit(ia)});}else{ib=h9.$0;h_=$.New(f,{$:0,$0:ib});}}return h_;},Delete:function(){return $.New(f,{$:0,$0:$.New(l,{$:0})});},Edit:$.Class({GetEnumerator:function(){var ic;ic=this.get_Sequence();return o.Get(ic);},GetEnumerator1:function(){var id;id=this.get_Sequence();return o.Get(id);},get_Sequence:function(){var ie,_if,ig,ih;if(this.$==1){_if=this.$0;ie=_if.get_Sequence();}else{if(this.$==2){ig=this.$0;ie=ig.get_Sequence();}else{ih=this.$0;ie=ih.get_Sequence();}}return ie;}}),FlipEdit:function(ii){var ij,ik,il,im;if(ii.$==1){ik=ii.$0;ij=$.New(f,{$:2,$0:ik});}else{if(ii.$==2){il=ii.$0;ij=$.New(f,{$:1,$0:il});}else{im=ii.$0;ij=$.New(f,{$:0,$0:im});}}return ij;},FromSequence:function(_in){var io,ir;io=function(ip){return function(iq){return $.New(l,{$:2,$0:ip,$1:$.New(l,{$:1,$0:iq})});};};ir=$.New(l,{$:0});return n.fold(io,ir,_in);},Range:function(is,it){var iu,iv,iw,ix,iy,iz,iA,iB,iC,iD,iE,iF,iG,iH;iu=[];iu[3]=0;iu[2]=it;iu[1]=is;iu[0]=1;while(iu[0]){if(iu[1].$==1){iw=iu[1].$0;if(iu[2].$==2){iu[2].$1;iy=iu[2].$0;iu[3]=iu[3];iu[2]=iy;iu[1]=iw;ix=void(iu[0]=1);}else{iz=iu[3];iA=$.New(l,{$:0});iu[3]=iz;iu[2]=iA;iu[1]=iw;ix=void(iu[0]=1);}iv=ix;}else{if(iu[1].$==2){iB=iu[1].$0;if(iu[2].$==2){iD=iu[2].$1;iE=iu[2].$0;iu[3]=iu[3]+e.Count(iE);iu[2]=iD;iu[1]=iB;iC=void(iu[0]=1);}else{iF=iu[2];iG=iu[3]+e.Count(iF);iH=$.New(l,{$:0});iu[3]=iG;iu[2]=iH;iu[1]=iB;iC=void(iu[0]=1);}iv=iC;}else{iu[1].$0;iu[0]=0;iv=void(iu[1]=[iu[3],e.Count(iu[2])]);}}}return iu[1];},ReplacedTree:function(iI,iJ){var iK,iL,iM,iN,iO,iP,iQ;if(iI.$==1){iL=iI.$0;if(iJ.$==2){iJ.$1;iN=iJ.$0;iM=e.ReplacedTree(iL,iN);}else{iM=e.ReplacedTree($.New(f,{$:1,$0:iL}),$.New(l,{$:2,$0:$.New(l,{$:0}),$1:iJ}));}iK=iM;}else{if(iI.$==2){iO=iI.$0;if(iJ.$==2){iQ=iJ.$1;iJ.$0;iP=e.ReplacedTree(iO,iQ);}else{iP=e.ReplacedTree($.New(f,{$:2,$0:iO}),$.New(l,{$:2,$0:iJ,$1:$.New(l,{$:0})}));}iK=iP;}else{iI.$0;iK=iJ;}}return iK;},Set:function(iR){return $.New(f,{$:0,$0:$.New(l,{$:1,$0:iR})});},ShowEdit:function(iS){var iT;iT=function(iU){var iV,iW,iX;if(iU.$==1){iW=iU.$0;iV="Left > "+iT(iW);}else{if(iU.$==2){iX=iU.$0;iV="Right > "+iT(iX);}else{iV="Replace";}}return iV;};return iT(iS);},Transform:function(iY,iZ){var i0,i1,i2,i3,i4,i5;if(iZ.$==1){i1=iZ.$0;i2=e.Transform(iY,i1);i0=$.New(f,{$:1,$0:i2});}else{if(iZ.$==2){i3=iZ.$0;i4=e.Transform(iY,i3);i0=$.New(f,{$:2,$0:i4});}else{i5=iZ.$0;i0=$.New(f,{$:0,$0:iY(i5)});}}return i0;},Tree:$.Class({GetEnumerator:function(){var i6;i6=this.get_Sequence();return o.Get(i6);},GetEnumerator1:function(){var i7;i7=this.get_Sequence();return o.Get(i7);},Map:function(i8){var i9,i_,i$,ja;if(this.$==1){i_=this.$0;i9=$.New(l,{$:1,$0:i8(i_)});}else{if(this.$==2){i$=this.$1;ja=this.$0;i9=$.New(l,{$:2,$0:ja.Map(i8),$1:i$.Map(i8)});}else{i9=$.New(l,{$:0});}}return i9;},get_Sequence:function(){var jb,jc,jd,je;if(this.$==1){jc=this.$0;jb=[jc];}else{if(this.$==2){jd=this.$1;je=this.$0;jb=n.append(je.get_Sequence(),jd.get_Sequence());}else{jb=n.empty();}}return jb;}})},Validator:$.Class({Is:function(jf,jg,jh){return this.Validate(jf,jg,jh);},IsEmail:function(ji){var jk=this;return function(jj){return jk.IsRegexMatch("^[A-Za-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[A-Za-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[A-Za-z0-9](?:[A-Za-z0-9-]*[A-Za-z0-9])?\\.)+[A-Za-z0-9](?:[A-Za-z0-9-]*[A-Za-z0-9])?$",ji,jj);};},IsEqual:function(jl,jm,jn){var jo;jo=function(jp){return p.Equals(jp,jl);};return this.Validate(jo,jm,jn);},IsFloat:function(jq){var js=this;return function(jr){return js.IsRegexMatch("^\\s*(\\+|-)?((\\d+(\\.\\d+)?)|(\\.\\d+))\\s*$",jq,jr);};},IsGreaterThan:function(jt,ju,jv){var jw;jw=function(jx){return p.Compare(jx,jt)===1;};return this.Validate(jw,ju,jv);},IsInt:function(jy){var jA=this;return function(jz){return jA.IsRegexMatch("^-?\\d+$",jy,jz);};},IsLessThan:function(jB,jC,jD){var jE;jE=function(jF){return p.Compare(jF,jB)===-1;};return this.Validate(jE,jC,jD);},IsNotEmpty:function(jG,jH){var jI;jI=function(jJ){return jJ!=="";};return this.Validate(jI,jG,jH);},IsNotEqual:function(jK,jL,jM){var jN;jN=function(jO){return!p.Equals(jO,jK);};return this.Validate(jN,jL,jM);},IsRegexMatch:function(jP,jQ,jR){var jS,jV=this;jS=function(jT){var jU;jU=jV.VP;return jU.Matches(jP,jT);};return jV.Validate(jS,jQ,jR);},IsTrue:function(jW,jX){var jY;jY=function(jZ){return jZ;};return this.Validate(jY,jW,jX);},Validate:function(j0,j1,j2){var j3;j3=j2.MapResult(function(j4){var j5,j6,j7;if(j4.$==1){j6=j4.$0;j5=$.New(g,{$:1,$0:j6});}else{j7=j4.$0;j5=j0(j7)?$.New(g,{$:0,$0:j7}):$.New(g,{$:1,$0:i.ofArray([j1])});}return j5;});return j3;}},{New:function(j8){var j9;j9=$.New(this,{});j9.VP=j8;return j9;}})}}}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.Formlets);b=$.Safe(a.Base);c=$.Safe(b.Formlet);d=$.Safe(b.Form);e=$.Safe(b.Tree);f=$.Safe(e.Edit);g=$.Safe(b.Result);h=$.Safe($$.IntelliFactory.WebSharper);i=$.Safe(h.List);j=$.Safe(i.T);k=$.Safe(b.LayoutUtils);l=$.Safe(e.Tree);m=$.Safe(h.Util);n=$.Safe(h.Seq);o=$.Safe(h.Enumerator);return p=$.Safe(h.Unchecked);});$.OnLoad(function(){return;});}());
