(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1;$.Define($$,{IntelliFactory:{WebSharper:{Formlet:{Body:$.Class({},{New:function(_2,_3){return $.New(c,{Element:_2,Label:_3});}}),Controls:{Button:function(_4){var _5;_5=function(){return e.Button(f.ofArray([e.Text(_4)]));};return g.ElementButton(_5);},Checkbox:function(_7){return g.CheckboxControl(false,_7);},CheckboxControl:function(_8,_9){var _;_=function(){var bb,bc,bd,be,bf,bg,bh,bn,bo,bp,bq,br,bs,bt;bb=i.New($.New(l,{$:0,$0:_9}));if(_8){be=e.Attr();bd=f.ofArray([be.NewAttr("disabled","disabled")]);}else{bd=$.New(m,{$:0});}bc=bd;bg=e.Attr();bf=n.add(e.Input(f.ofArray([bg.NewAttr("type","checkbox"),e.Attr().Class("inputCheckbox")])),bc);bh=function(bi){return function(){var bk,bl,bm;if(!_8){bl=o(bi.Body).prop("checked");bm=$.New(l,{$:0,$0:bl});bk=bb.Trigger(bm);}else{bk=null;}return bk;};};p.Events().OnClick(bh,bf);bn=bf;if(_9){bp=bn["HtmlProvider@31"];bq=bn.Body;bo=bp.SetAttribute(bq,"defaultChecked","true");}else{br=bn["HtmlProvider@31"];bs=bn.Body;bo=br.RemoveAttribute(bs,"checked");}bt=function(){var bv,bw,bx,by,bz,bA,bB;if(_9){bw=bn["HtmlProvider@31"];bx=bn.Body;bv=bw.SetProperty(bx,"checked",true);}else{by=bn["HtmlProvider@31"];bz=bn.Body;by.RemoveAttribute(bz,"checked");bA=bn["HtmlProvider@31"];bB=bn.Body;bv=bA.SetProperty(bB,"checked",false);}return bb.Trigger($.New(l,{$:0,$0:_9}));};bt(null);return[bn,bt,bb];};return q.MkFormlet(_);},CheckboxGroup:function(bB){return g.CheckboxGroupControl(false,bB);},CheckboxGroupControl:function(bC,bD){var bE,bS,bT,bU,bY;bE=$.Tupled(function(bF){var bG,bH,bI,bJ,bK,bO,bP,bR;bG=bF[0];bH=bF[1];bI=bF[2];bJ=g.CheckboxControl(bC,bI);bK=function(){var bM,bN;bM=f.ofArray([e.Text(bG)]);bN=e.Tags();return bN.NewTag("label",bM);};bO={$:1,$0:bK};bP=function(bQ){return[bQ,bH];};bR=r.WithLabel(bO,bJ);return r.Map(bP,bR);});bS=f.map(bE,bD);bT=r.Sequence(bS);bU=$.Tupled(function(bV){var bW,bX;bW=bV[0];bX=bV[1];return bW?{$:1,$0:bX}:{$:0};});bY=function(bZ){return f.choose(bU,bZ);};return r.Map(bY,bT);},ElementButton:function(b0){var b1;b1=function(){var b3,b4,b5,b6,b9,b_;b3=i.New($.New(l,{$:1,$0:$.New(m,{$:0})}));b4={contents:0};b5=b0(null);b6=function(){return function(){b3.Trigger($.New(l,{$:0,$0:b4.contents}));return s.Increment(b4);};};p.Events().OnClick(b6,b5);b9=b5;b_=function(){b4.contents=0;return b3.Trigger($.New(l,{$:1,$0:$.New(m,{$:0})}));};return[b9,b_,b3];};return q.MkFormlet(b1);},Input:function(ca){return g.InputField(false,"text",t.InputTextClass(),ca);},InputControl:function(cb,cc){var cd;cd=function(){var cf,cg,ch;cf=i.New($.New(l,{$:0,$0:cb}));cg=cc(cf);cg.set_Value(cb);ch=function(){cg.set_Value(cb);return cf.Trigger($.New(l,{$:0,$0:cb}));};return[cg,ch,cf];};return q.MkFormlet(cd);},InputField:function(cj,ck,cl,cm){return g.InputControl(cm,function(cn){var co,cp,cq,cr,cs,ct,cu,cv;if(cj){cq=e.Attr();cp=f.ofArray([cq.NewAttr("readonly","readonly")]);}else{cp=$.New(m,{$:0});}co=cp;cs=e.Attr();cr=f.ofArray([cs.NewAttr("type",ck),e.Attr().Class(cl)]);ct=f.append(cr,co);cu=e.Input(ct);cv=function(){return!cj?cn.Trigger($.New(l,{$:0,$0:cu.get_Value()})):null;};g.OnTextChange(cv,cu);return cu;});},OnTextChange:function(cx,cy){var cz,cA,cD,cF;cz={contents:cy.get_Value()};cA=function(){var cC;if(cy.get_Value()!==cz.contents){cz.contents=cy.get_Value();cC=cx(null);}else{cC=null;}return cC;};cD=function(){return cA(null);};p.Events().OnChange(cD,cy);cF=function(){return function(){return cA(null);};};p.Events().OnKeyUp(cF,cy);cy.Body.oninput=cA;return;},Password:function(cI){return g.InputField(false,"password","inputPassword",cI);},RadioButtonGroup:function(cJ,cK){return g.RadioButtonGroupControl(false,cJ,cK);},RadioButtonGroupControl:function(cL,cM,cN){var cO;cO=function(){var cQ,cR,cS,cT,cU,cY,cZ,c5,c6,c8,c9,dg,dh,du,dB,dO,dP,dQ,dR;cQ="id"+u.round(u.random()*100000000);if(cM.$==0){cS={$:0};}else{cT=cM.$0;cU=function(cV){return $.Tupled(function(cW){var cX;cW[0];cX=cW[1];return[cV,cX];});};cY=f.mapi(cU,cN);cZ=$.Tupled(function(c0){var c1,c2,c3,c4;c1=c0[0];c2=c0[1];if(cM.$==0){c3={$:0};}else{c4=cM.$0;c3=c4===c1?{$:1,$0:$.New(l,{$:0,$0:c2})}:{$:0};}return c3;});cS=v.tryPick(cZ,cY);}cR=cS;c5=i.New($.New(l,{$:1,$0:$.New(m,{$:0})}));c6=function(c7){return i.New(c7);};c8=w.Maybe(c5,c6,cR);c9=$.Tupled(function(c_){var c$,da,db,dc,dd,de,df;c$=c_[0];da=c_[1];dc=e.Attr();dd=e.Attr();if(cL){df=e.Attr();de=f.ofArray([df.NewAttr("disabled","disabled")]);}else{de=$.New(m,{$:0});}db=n.add(e.Input(f.ofArray([e.Attr().Class("inputRadio"),dc.NewAttr("type","radio"),dd.NewAttr("name",cQ)])),de);return[db,c$,da];});dg=f.map(c9,cN);dh=function(di,dj,dk){var dl,dm,dn,_do,dp,dq,dr,ds,dt;if(cM.$==0){dm=di["HtmlProvider@31"];dn=di.Body;dm.RemoveAttribute(dn,"checked");dl=c8.Trigger($.New(l,{$:1,$0:$.New(m,{$:0})}));}else{_do=cM.$0;if(_do===dk){dq=di["HtmlProvider@31"];dr=di.Body;dq.SetProperty(dr,"checked",true);dp=c8.Trigger($.New(l,{$:0,$0:dj}));}else{ds=di["HtmlProvider@31"];dt=di.Body;dp=ds.SetProperty(dt,"checked",false);}dl=dp;}return dl;};du=function(){var dw;dw=function(dx){return $.Tupled(function(dy){var dz,dA;dz=dy[0];dy[1];dA=dy[2];return dh(dz,dA,dx);});};return v.iteri(dw,dg);};dB=function(dC){return $.Tupled(function(dD){var dE,dF,dG,dH,dK;dE=dD[0];dF=dD[1];dG=dD[2];dh(dE,dG,dC);dH=function(){return function(){return!cL?c8.Trigger($.New(l,{$:0,$0:dG})):null;};};p.Events().OnClick(dH,dE);dK={$:1,$0:function(){var dM,dN;dM=f.ofArray([e.Text(dF)]);dN=e.Tags();return dN.NewTag("label",dM);}};return $.New(c,{Element:dE,Label:dK});});};dO=f.mapi(dB,dg);dP=x.FromSequence(dO);dQ=$.New(y,{$:0,$0:dP});dR=q.RX().Return(dQ);return $.New(z,{Body:dR,Dispose1:function(){},Notify:function(){return du(null);},State:c8});};return r.New(cO);},ReadOnlyCheckbox:function(dU){return g.CheckboxControl(true,dU);},ReadOnlyInput:function(dV){return g.InputField(true,"text",t.InputTextClass(),dV);},ReadOnlyRadioButtonGroup:function(dW,dX){return g.RadioButtonGroupControl(true,dW,dX);},ReadOnlySelect:function(dY,dZ){return g.SelectControl(true,dY,dZ);},ReadOnlyTextArea:function(d0){return g.TextAreaControl(true,d0);},Select:function(d1,d2){return g.SelectControl(false,d1,d2);},SelectControl:function(d3,d4,d5){var d6;d6=function(){var d8,d_,d$,ea,eb,ej,ek,el,em,en,eo,ep,eq,ev;d8=$.Tupled(function(d9){return d9[1];});d_=f.map(d8,d5);d$=A.ofSeq(d_);ea=(d4>=0?d4<d5.get_Length():false)?d4:0;eb=function(ec){return $.Tupled(function(ed){var ee,ef,eg,eh,ei;ee=ed[0];ed[1];ef=e.Tags();eh=e.Attr();ei=$$.String(ec);eg=f.ofArray([e.Text(ee),eh.NewAttr("value",ei)]);return ef.NewTag("option",eg);});};ej=f.mapi(eb,d5);ek=e.Select(ej);if(d3){en=e.Attr();em=n.add(ek,f.ofArray([en.NewAttr("disabled","disabled")]));}else{em=ek;}el=em;eo=$.New(l,{$:0,$0:B.GetArray(d$,ea)});ep=i.New(eo);eq=function(){var es,et,eu;es=$$.String(ea);et=el["HtmlProvider@31"];eu=el.Body;et.SetProperty(eu,"value",es);return ep.Trigger(eo);};eq(null);ev=function(){var ex,ey,ez,eA;if(!d3){ey=el.get_Value();ez=B.GetArray(d$,ey<<0);eA=$.New(l,{$:0,$0:ez});ex=ep.Trigger(eA);}else{ex=null;}return ex;};p.Events().OnChange(ev,el);eq(null);return[el,eq,ep];};return q.MkFormlet(d6);},TextArea:function(eB){return g.TextAreaControl(false,eB);},TextAreaControl:function(eC,eD){return g.InputControl(eD,function(eE){var eF,eG,eH,eI,eJ;if(eC){eH=e.Attr();eG=f.ofArray([eH.NewAttr("readonly","readonly")]);}else{eG=$.New(m,{$:0});}eF=eG;eI=e.TextArea(eF);eJ=function(){return!eC?eE.Trigger($.New(l,{$:0,$0:eI.get_Value()})):null;};g.OnTextChange(eJ,eI);return eI;});}},CssConstants:{InputTextClass:$.Field(function(){return"inputText";})},Data:{$:function(eL,eM){var eN,eO;eN=q.BaseFormlet();eO=eN.Apply(eL,eM);return q.OfIFormlet(eO);},BaseFormlet:function(){return C.New(q.UtilsProvider());},DefaultLayout:$.Field(function(){return q.Layout().get_Vertical();}),Formlet:$.Class({Build:function(){return this.BuildInternal.call(null,null);},MapResult:function(eP){var eQ,eT=this;eQ=$.New(D,{BuildInternal:function(){var eS,eU,eV,eW;eS=eT.BuildInternal.call(null,null);eU=eT.Utils.Reactive;eV=eS.State;eW=function(eX){return eP(eX);};return $.New(z,{Body:eS.Body,Dispose1:eS.Dispose1,Notify:eS.Notify,State:eU.Select(eV,eW)});},LayoutInternal:eT.LayoutInternal,ElementInternal:{$:0},FormletBase:eT.FormletBase,Utils:eT.Utils});return eQ;},Render:function(){return this.Run(function(){}).Render();},Run:function(eZ){var e0,e1,e2,e3,e4,e7,e8,e9,e_,e$,fa,fb;e0=this.ElementInternal;if(e0.$==0){e2=this.FormletBase.ApplyLayout(this);e3=e2.Build();e4=E.subscribeTo(e3.State,function(e5){var e6;e6=l.Map(eZ,e5);return;});e7=e2.get_Layout().Apply.call(null,e3.Body);if(e7.$==0){e_=q.DefaultLayout().Apply.call(null,e3.Body).$0;e$=e_[0];e9=e$.Element;}else{fa=e7.$0[0];e9=fa.Element;}e8=e9;this.ElementInternal={$:1,$0:e8};e1=e8;}else{fb=e0.$0;e1=fb;}return e1;},get_Body:function(){return this.Run(function(){}).get_Body();},get_Layout:function(){return this.LayoutInternal;}}),Layout:$.Field(function(){return F.New(G.New({Reactive:H.Default()}));}),MkFormlet:function(fd){var fe,ff,fq;fe=q.BaseFormlet();ff=function(){var fh,fi,fj,fk,fl,fn,fo;fh=fd(null);fi=fh[2];fj=fh[1];fk=fh[0];fl=function(){return fj(null);};fn=q.NewBody(fk,{$:0});fo=x.Set(fn);return $.New(z,{Body:q.RX().Return(fo),Dispose1:function(){return null;},Notify:fl,State:fi});};fq=fe.New(ff);return q.OfIFormlet(fq);},NewBody:function(fr,fs){return c.New(fr,fs);},OfIFormlet:function(ft){var fu;fu=$.New(D,{BuildInternal:function(){return ft.Build();},LayoutInternal:ft.get_Layout(),ElementInternal:{$:0},FormletBase:q.BaseFormlet(),Utils:q.UtilsProvider()});return q.PropagateRenderFrom(ft,fu);},PropagateRenderFrom:function(fw,fx){fw.hasOwnProperty("Render")?void(fx.Render=fw.Render):null;return fx;},RX:$.Field(function(){return H.Default();}),UtilsProvider:function(){return{Reactive:q.RX(),DefaultLayout:q.DefaultLayout()};},Validator:$.Field(function(){return I.New(J.New());}),ValidatorProvidor:$.Class({Matches:function(fy,fz){return fz.match(new K(fy));}},{New:function(){return $.New(this,{});}})},ElementStore:$.Class({Init:function(){this.store=M.New2();return;},RegisterElement:function(fA,fB){var fC;fC=this.store.ContainsKey(fA);return!fC?this.store.set_Item(fA,fB):null;},Remove:function(fD){var fE,fF;if(this.store.ContainsKey(fD)){(this.store.get_Item(fD))(null);fF=this.store.Remove(fD);fE=void fF;}else{fE=null;}return fE;}},{New:function(){return $.New(this,{});},NewElementStore:function(){var fG;fG=N.New();fG.Init();return fG;}}),Enhance:{Cancel:function(fH,fI){return r.Replace(fH,function(fJ){return fI(fJ)?r.Empty():r.Return(fJ);});},CustomMany:function(fK,fL){var fM,fO,fP,fR,fT,fU,fV,fW,fX,fY,f6,f7,f8,f9,f$,ga;fM=g.ElementButton(function(){return n.add(e.Div(f.ofArray([e.Attr().Class(fK.AddIconClass)])),f.ofArray([e.Div($.New(m,{$:0}))]));});fO=r.InitWith(1,fM);fP=function(){};fR=g.ElementButton(function(){return n.add(e.Div(f.ofArray([e.Attr().Class(fK.RemoveIconClass)])),f.ofArray([e.Div($.New(m,{$:0}))]));});fT=r.Map(fP,fR);fU=r.WithCancelation(fL,fT);fV=q.Layout().get_Horizontal();fW=r.WithLayout(fV,fU);fX=O.Deletable(fW);fY=function(){var f0,f2,f4,f5;f0=function(f1){return f.ofSeq(f1);};f2=O.Many_(fO,function(){return fX;});f4=r.Map(f0,f2);f5=r.WithLayoutOrDefault(f4);return r.ApplyLayout(f5);};f6=i.New($.New(l,{$:0,$0:null}));f7=q.BaseFormlet().FromState(f6);f8=q.OfIFormlet(f7);f9=function(){return f6.Trigger($.New(l,{$:0,$0:null}));};f$=r.Do();ga=f$.Delay(function(){return f$.Bind(f8,function(){return f$.ReturnFrom(fY(null));});});return r.WithNotification(f9,ga);},Deletable:function(gd){return O.Replace(gd,function(ge){var gf,gg;if(ge.$==1){gg=ge.$0;gf=r.Return({$:1,$0:gg});}else{gf=r.ReturnEmpty({$:0});}return gf;});},FormButtonConfiguration:$.Class({},{get_Default:function(){return $.New(P,{Label:{$:0},Style:{$:0},Class:{$:0}});}}),FormContainerConfiguration:$.Class({},{get_Default:function(){var gh;gh={$:0};return $.New(Q,{Header:{$:0},Padding:R.get_Default(),Description:gh,BackgroundColor:{$:0},BorderColor:{$:0},CssClass:{$:0},Style:{$:0}});}}),InputButton:function(gi,gj){var gk;gk=function(){var gm,gn,go,gq,gr,gs,gt,gw,gx,gy,gz,gA,gB,gC,gD,gE,gF,gG,gH,gI,gJ,gK,gL;gm=i.New($.New(l,{$:1,$0:$.New(m,{$:0})}));gn={contents:0};go=w.Maybe("Submit",function(gp){return gp;},gi.Label);gr=e.Attr();gs=e.Attr();gq=n.add(e.Input(f.ofArray([gr.NewAttr("type","button")])),f.ofArray([e.Attr().Class("submitButton"),gs.NewAttr("value",go)]));gt=function(){return function(){s.Increment(gn);return gm.Trigger($.New(l,{$:0,$0:gn.contents}));};};p.Events().OnClick(gt,gq);gw=gq;if(!gj){gz=gw["HtmlProvider@31"];gA=gw.Body;gy=gz.AddClass(gA,"disabledButton");}else{gy=null;}gB=gi.Style;if(gB.$==1){gD=gB.$0;gE=gw["HtmlProvider@31"];gF=gw.Body;gC=gE.SetStyle(gF,gD);}else{gC=null;}gG=gi.Class;if(gG.$==1){gI=gG.$0;gJ=gw["HtmlProvider@31"];gK=gw.Body;gH=gJ.AddClass(gK,gI);}else{gH=null;}gx=gw;gL=function(){gn.contents=0;return gm.Trigger($.New(l,{$:1,$0:$.New(m,{$:0})}));};gm.Trigger($.New(l,{$:1,$0:$.New(m,{$:0})}));return[gx,gL,gm];};return q.MkFormlet(gk);},Many:function(gN){return O.CustomMany(S.get_Default(),gN);},ManyConfiguration:$.Class({},{get_Default:function(){return $.New(S,{AddIconClass:"addIcon",RemoveIconClass:"removeIcon"});}}),Many_:function(gO,gP){var gQ,gS,gU,gW,gX,gY;gQ=function(gR){return gP(gR);};gS=function(gT){return gT;};gU=function(gV){return v.choose(gS,gV);};gW=r.Map(gQ,gO);gX=r.SelectMany(gW);gY=r.FlipBody(gX);return r.Map(gU,gY);},Padding:$.Class({},{get_Default:function(){return $.New(R,{Left:{$:0},Right:{$:0},Top:{$:0},Bottom:{$:0}});}}),Replace:function(gZ,g0){var g1,g7;g1=function(g2){var g3,g4,g5,g6;if(g2.$==1){g4=g2.$0;g5=r.FailWith(g4);g3=$.New(l,{$:0,$0:g5});}else{g6=g2.$0;g3=$.New(l,{$:0,$0:g0(g6)});}return g3;};g7=r.MapResult(g1,gZ);return r.Switch(g7);},ValidationFrameConfiguration:$.Class({},{get_Default:function(){return $.New(T,{ValidClass:{$:1,$0:"successFormlet"},ValidStyle:{$:0},ErrorClass:{$:1,$0:"errorFormlet"},ErrorStyle:{$:0}});}}),ValidationIconConfiguration:$.Class({},{get_Default:function(){return $.New(U,{ValidIconClass:"validIcon",ErrorIconClass:"errorIcon"});}}),WithCssClass:function(g8,g9){var g_;g_=function(g$){var ha,hb;ha=g$["HtmlProvider@31"];hb=g$.Body;ha.AddClass(hb,g8);return g$;};return r.MapElement(g_,g9);},WithCustomFormContainer:function(hc,hd){var he,hf;he=r.ApplyLayout(hd);hf=function(hg){var hh,hi,hj,ho,hp,hq,hr,hy,hz,hA,hF,hG,hH,hJ,hK,hM,hN,hP,hQ,hS,hT,hV,hW,h4,h5,h6,h7,h8,h9,h_,h$,ia,ib;hh=hc.Description;hi=$.New(m,{$:0});hj=function(hk){var hl,hm,hn;if(hk.$==1){hm=hk.$0;hl=f.ofArray([hm(null)]);}else{hn=hk.$0;hl=f.ofArray([e.P(f.ofArray([e.Tags().text(hn)]))]);}return hl;};ho=w.Maybe(hi,hj,hh);hp=hc.Header;hq=w.InTable(f.ofArray([f.ofArray([n.add(e.Div(f.ofArray([e.Attr().Class("headerPanel")])),ho)]),f.ofArray([hg])]));hr=function(hs){var ht,hu,hv,hw,hx;if(hs.$==1){hv=hs.$0;hu=hv(null);}else{hw=hs.$0;hu=e.H1(f.ofArray([e.Tags().text(hw)]));}ht=hu;hx=n.add(e.Div(f.ofArray([e.Attr().Class("headerPanel")])),$.New(m,{$:1,$0:ht,$1:ho}));return w.InTable(f.ofArray([f.ofArray([hx]),f.ofArray([hg])]));};hy=w.Maybe(hq,hr,hp);hz=n.add(e.TD(f.ofArray([e.Attr().Class("formlet")])),f.ofArray([hy]));hA=function(hB){var hC,hD,hE;hC="border-color: "+hB;hD=hz["HtmlProvider@31"];hE=hz.Body;return hD.SetStyle(hE,hC);};hF=hc.BorderColor;w.Maybe(null,hA,hF);hH=function(hI){return hI;};hJ=hc.BackgroundColor;hK=function(hL){return $$.String(hL)+"px";};hM=hc.Padding.Left;hN=function(hO){return $$.String(hO)+"px";};hP=hc.Padding.Right;hQ=function(hR){return $$.String(hR)+"px";};hS=hc.Padding.Top;hT=function(hU){return $$.String(hU)+"px";};hV=hc.Padding.Bottom;hG=f.ofArray([["background-color",w.MapOption(hH,hJ)],["padding-left",w.MapOption(hK,hM)],["padding-right",w.MapOption(hN,hP)],["padding-top",w.MapOption(hQ,hS)],["padding-bottom",w.MapOption(hT,hV)]]);hW=$.Tupled(function(hX){var hY,hZ,h0,h1,h2,h3;hY=hX[0];hZ=hX[1];if(hZ.$==0){h0=null;}else{h1=hZ.$0;h2=hz["HtmlProvider@31"];h3=hz.Body;h0=h2.SetCss(h3,hY,h1);}return h0;});v.iter(hW,hG);h4=hc.Style;if(h4.$==0){h5=null;}else{h6=h4.$0;h7=hz["HtmlProvider@31"];h8=hz.Body;h5=h7.SetStyle(h8,h6);}h9=hc.CssClass;if(h9.$==0){h_=null;}else{h$=h9.$0;ia=hz["HtmlProvider@31"];ib=hz.Body;h_=ia.AddClass(ib,h$);}return e.Table(f.ofArray([e.TBody(f.ofArray([e.TR(f.ofArray([hz]))]))]));};return r.MapElement(hf,he);},WithCustomResetButton:function(ic,id){var ie,_if,ig,ih;ie=ic.Label;if(ie.$==0){ig=$.New(P,{Label:{$:1,$0:"Reset"},Style:ic.Style,Class:ic.Class});}else{ie.$0;ig=ic;}_if=ig;ih=O.InputButton(_if,true);return O.WithResetFormlet(id,ih);},WithCustomSubmitAndResetButtons:function(ii,ij,ik){var il;il=function(im){return function(_in){var io,ip,iq,ir,it,iu,iv,ix,iy,iz,iC,iF;if(_in.$==1){iq=_in.$0;ir=function(){return $.New(l,{$:1,$0:iq});};it=O.InputButton(ii,false);ip=r.MapResult(ir,it);}else{iu=_in.$0;iv=function(){return iu;};ix=O.InputButton(ii,true);ip=r.Map(iv,ix);}io=ip;iy=r.Do();iz=iy.Delay(function(){return iy.Bind(r.LiftResult(O.InputButton(ij,true)),function(iB){iB.$==0?im(null):null;return iy.Return(null);});});iC=q.$(q.$(r.Return(function(iD){return function(){return iD;};}),io),iz);iF=q.Layout().get_Horizontal();return r.WithLayout(iF,iC);};};return O.WithSubmitAndReset(ik,il);},WithCustomSubmitButton:function(iG,iH){var iI,iJ,iK;iI=iG.Label;if(iI.$==0){iK=$.New(P,{Label:{$:1,$0:"Submit"},Style:iG.Style,Class:iG.Class});}else{iI.$0;iK=iG;}iJ=iK;return O.WithSubmitFormlet(iH,function(iL){var iM,iO,iP;iM=function(){};iO=iL.$==0?true:false;iP=O.InputButton(iJ,iO);return r.Map(iM,iP);});},WithCustomValidationFrame:function(iQ,iR){var iS;iS=function(iT){return function(iU){var iV,iW;iV=e.Div(f.ofArray([iU.Element]));iW=function(iX){var iY;iY=E.subscribeTo(iT,function(iZ){var i0,i1,i2,i3,i4,i5,i6,i7,i8,i9,i_,i$,ja,jb,jc,jd,je,jf,jg,jh,ji,jj,jk,jl,jm,jn,jo,jp,jq,jr,js,jt,ju,jv,jw,jx;if(iZ.$==1){i1=iZ.$0;i2=iQ.ValidClass;if(i2.$==1){i4=i2.$0;i5=iX["HtmlProvider@31"];i6=iX.Body;i3=i5.RemoveClass(i6,i4);}else{i3=null;}i7=iQ.ErrorClass;if(i7.$==1){i9=i7.$0;i_=iX["HtmlProvider@31"];i$=iX.Body;i8=i_.AddClass(i$,i9);}else{i8=null;}ja=iQ.ErrorStyle;if(ja.$==1){jc=ja.$0;jd=iX["HtmlProvider@31"];je=iX.Body;jb=jd.SetStyle(je,jc);}else{jf=iX["HtmlProvider@31"];jg=iX.Body;jb=jf.SetStyle(jg,"");}i0=jb;}else{jh=iQ.ErrorClass;if(jh.$==1){jj=jh.$0;jk=iX["HtmlProvider@31"];jl=iX.Body;ji=jk.RemoveClass(jl,jj);}else{ji=null;}jm=iQ.ValidClass;if(jm.$==1){jo=jm.$0;jp=iX["HtmlProvider@31"];jq=iX.Body;jn=jp.AddClass(jq,jo);}else{jn=null;}jr=iQ.ValidStyle;if(jr.$==1){jt=jr.$0;ju=iX["HtmlProvider@31"];jv=iX.Body;js=ju.SetStyle(jv,jt);}else{jw=iX["HtmlProvider@31"];jx=iX.Body;js=jw.SetStyle(jx,"");}i0=js;}return i0;});return;};n.OnAfterRender(iW,iV);return iV;};};return O.WrapFormlet(iS,iR);},WithCustomValidationIcon:function(jy,jz){var jA,jB,jN,jO,jQ,jU,jV;jA=r.WithLayoutOrDefault(jz);jB=function(jC){var jD;jD=function(){var jF,jG,jH,jK,jL,jM;if(jC.$==1){jG=jC.$0;jH=function(jI){return function(jJ){return jI+" "+jJ;};};jK=v.fold(jH,"",jG);jL=e.Attr();jF=n.add(e.Div(f.ofArray([e.Attr().Class(jy.ErrorIconClass),jL.NewAttr("title",jK)])),f.ofArray([e.Div($.New(m,{$:0}))]));}else{jM=e.Attr();jF=n.add(e.Div(f.ofArray([e.Attr().Class(jy.ValidIconClass),jM.NewAttr("title","")])),f.ofArray([e.Div($.New(m,{$:0}))]));}return jF;};return r.OfElement(jD);};jN=r.Do();jO=function(jP){return l.Join(jP);};jQ=jN.Delay(function(){return jN.Bind(r.LiftResult(jA),function(jS){return jN.Bind(jB(jS),function(){return jN.Return(jS);});});});jU=r.MapResult(jO,jQ);jV=q.Layout().get_Horizontal();return r.WithLayout(jV,jU);},WithErrorFormlet:function(jW,jX){var jY,jZ,j1;jY=r.Do();jZ=function(j0){return l.Join(j0);};j1=jY.Delay(function(){return jY.Bind(r.LiftResult(jX),function(j3){var j4,j5,j6;if(j3.$==1){j5=j3.$0;j6=r.Do();j4=j6.Delay(function(){return j6.Bind(jW(j5),function(){return j6.Return(j3);});});}else{j3.$0;j4=r.Return(j3);}return jY.ReturnFrom(j4);});});return r.MapResult(jZ,j1);},WithErrorSummary:function(j9,j_){var j$,kj,kk,km;j$=function(ka){return r.OfElement(function(){var kc,kd,ke,kf,kh,ki;kd=f.ofArray([e.Text(j9)]);ke=e.Tags();kf=function(kg){return e.LI(f.ofArray([e.Text(kg)]));};kh=f.map(kf,ka);kc=f.ofArray([ke.NewTag("legend",kd),e.UL(kh)]);ki=e.Tags();return ki.NewTag("fieldset",kc);});};kj=r.Do();kk=function(kl){return l.Join(kl);};km=kj.Delay(function(){return kj.Bind(r.LiftResult(j_),function(ko){var kp,kq,kr,kt;if(ko.$==1){kq=ko.$0;kr=function(){return ko;};kt=j$(kq);kp=r.Map(kr,kt);}else{ko.$0;kp=r.Return(ko);}return kj.ReturnFrom(kp);});});return r.MapResult(kk,km);},WithFormContainer:function(ku){return O.WithCustomFormContainer(Q.get_Default(),ku);},WithJsonPost:function(kv,kw){var kx,ky,kz,kA,kB,kC,kD,kE,kF,kG,kH,kI,kJ,kK,kL,kM,kN,kO,kP,kQ,kR,kS,kT,kU,kV,kW,kX,k4,k5,k8;kx=kv.PostUrl;if(kx.$==0){kz=$.New(m,{$:0});}else{kA=kx.$0;kB=e.Attr();kz=f.ofArray([kB.NewAttr("action",kA)]);}ky=kz;kC=kv.EncodingType;if(kC.$==0){kE=$.New(m,{$:0});}else{kF=kC.$0;kG=e.Attr();kE=f.ofArray([kG.NewAttr("enctype",kF)]);}kD=kE;kH=e.Tags();kJ=e.Attr();kK=e.Attr();kL=kv.ParameterName;kI=f.ofArray([kJ.NewAttr("type","hidden"),kK.NewAttr("name",kL)]);kM=kH.NewTag("input",kI);kN=e.Tags();kP=e.Attr();kQ=e.Attr();kO=f.ofArray([kP.NewAttr("type","submit"),kQ.NewAttr("value","Submit")]);kR=kN.NewTag("input",kO);kT=e.Attr();kU=e.Attr();kS=$.New(m,{$:1,$0:kT.NewAttr("method","POST"),$1:$.New(m,{$:1,$0:kU.NewAttr("style","display:none"),$1:ky})});kV=f.append(kS,kD);kW=n.add(e.Form(kV),f.ofArray([kM,kR]));kX=function(kY){var kZ,k0,k1,k2,k3;kZ=kv.EncodingType;if(kZ.$==0){k0=null;}else{k1=kZ.$0;if(k1==="multipart/form-data"){k3=o(kY.Body).attr("encoding","multipart/form-data");k2=void k3;}else{k2=null;}k0=k2;}return k0;};n.OnAfterRender(kX,kW);k4=kW;k5=function(k6){var k7;k7=V.stringify(k6);o(kM.Body).val(k7);return o(kR.Body).click();};k8=r.Map(k5,kw);return e.Div(f.ofArray([k4,k8]));},WithLabel:function(k9,k_){return r.WithLabel({$:1,$0:k9},k_);},WithLabelAbove:function(k$){var la;la=function(lb){var lc,ld,le,lf,lg,lh;lc=lb.Label;if(lc.$==0){le=e.Span($.New(m,{$:0}));}else{lf=lc.$0;le=lf(null);}ld=le;lg=e.Table(f.ofArray([e.TBody(f.ofArray([e.TR(f.ofArray([e.TD(f.ofArray([ld]))])),e.TR(f.ofArray([e.TD(f.ofArray([lb.Element]))]))]))]));lh={$:0};return $.New(c,{Element:lg,Label:lh});};return r.MapBody(la,k$);},WithLabelAndInfo:function(li,lj,lk){var ll;ll=function(){var ln,lo,lp;ln=f.ofArray([e.Text(li)]);lo=e.Tags();lp=e.Attr();return w.InTable(f.ofArray([f.ofArray([lo.NewTag("label",ln),e.Span(f.ofArray([lp.NewAttr("title",lj),e.Attr().Class("infoIcon")]))])]));};return O.WithLabel(ll,lk);},WithLabelConfiguration:function(lq,lr){var ls,lt;ls=r.ApplyLayout(lr);lt=q.Layout().LabelLayout(lq);return r.WithLayout(lt,ls);},WithLabelLeft:function(lu){var lv;lv=function(lw){var lx,ly,lz,lA,lB,lC;lx=lw.Label;if(lx.$==0){lz=e.Span($.New(m,{$:0}));}else{lA=lx.$0;lz=lA(null);}ly=lz;lB=e.Table(f.ofArray([e.TBody(f.ofArray([e.TR(f.ofArray([e.TD(f.ofArray([lw.Element])),e.TD(f.ofArray([ly]))]))]))]));lC={$:0};return $.New(c,{Element:lB,Label:lC});};return r.MapBody(lv,lu);},WithLegend:function(lD,lE){var lF;lF=function(lG){var lH,lI,lJ,lK,lL,lM,lN,lO;lI=f.ofArray([e.Tags().text(lD)]);lJ=e.Tags();lK=lG.Label;if(lK.$==0){lL=lG.Element;}else{lM=lK.$0;lL=w.InTable(f.ofArray([f.ofArray([lM(null),lG.Element])]));}lH=f.ofArray([lJ.NewTag("legend",lI),lL]);lN=e.Tags();lO=lN.NewTag("fieldset",lH);return $.New(c,{Element:lO,Label:{$:0}});};return r.MapBody(lF,lE);},WithResetAction:function(lP,lQ){var lR,lW,lX,lY,lZ;lR=function(){var lT,lU;lT=lQ.Build();lU=function(lV){return lP(null)?lT.Notify.call(null,lV):null;};return $.New(z,{Body:lT.Body,Dispose1:lT.Dispose1,Notify:lU,State:lT.State});};lW=r.New(lR);lX=lQ.get_Layout();lY=r.WithLayout(lX,lW);lZ=q.PropagateRenderFrom(lQ,lY);return q.OfIFormlet(lZ);},WithResetButton:function(l0){return O.WithCustomResetButton(P.get_Default(),l0);},WithResetFormlet:function(l1,l2){var l3,l4,l5,l6,l7,l8,l9,l_,ma,mg,mh;l3=r.WithLayoutOrDefault(l1);l4=r.ApplyLayout(l3);l5=r.InitWithFailure(l4);l6=r.LiftResult(l5);l7=r.WithNotificationChannel(l6);l8=r.LiftResult(l2);l9=r.Do();l_=function(l$){return l.Join(l$);};ma=l9.Delay(function(){return l9.Bind(l7,$.Tupled(function(mc){var md,me;md=mc[0];me=mc[1];return l9.Bind(l8,function(mf){mf.$==0?me(null):null;return l9.Return(md);});}));});mg=r.MapResult(l_,ma);mh=q.PropagateRenderFrom(l7,mg);return q.OfIFormlet(mh);},WithRowConfiguration:function(mi,mj){var mk,ml;mk=r.ApplyLayout(mj);ml=q.Layout().RowLayout(mi);return r.WithLayout(ml,mk);},WithSubmitAndReset:function(mm,mn){var mo,mp,mx;mo=r.Do();mp=mo.Delay(function(){var mr,ms;mr=r.InitWithFailure(mm);ms=r.LiftResult(mr);return mo.Bind(r.WithNotificationChannel(ms),$.Tupled(function(mt){var mu,mv;mu=mt[0];mv=mt[1];return mo.ReturnFrom((mn(function(mw){return mv(mw);}))(mu));}));});mx=q.PropagateRenderFrom(mm,mp);return q.OfIFormlet(mx);},WithSubmitAndResetButtons:function(my){var mz,mA,mB,mC;mz=P.get_Default();mA=$.New(P,{Label:{$:1,$0:"Submit"},Style:mz.Style,Class:mz.Class});mB=P.get_Default();mC=$.New(P,{Label:{$:1,$0:"Reset"},Style:mB.Style,Class:mB.Class});return O.WithCustomSubmitAndResetButtons(mA,mC,my);},WithSubmitButton:function(mD){return O.WithCustomSubmitButton(P.get_Default(),mD);},WithSubmitFormlet:function(mE,mF){var mG,mH,mJ,mO,mP;mG=r.Do();mH=function(mI){return l.Join(mI);};mJ=mG.Delay(function(){var mL;mL=r.InitWithFailure(mE);return mG.Bind(r.LiftResult(mL),function(mM){return mG.Bind(mF(mM),function(){return mG.Return(mM);});});});mO=r.MapResult(mH,mJ);mP=q.PropagateRenderFrom(mE,mO);return q.OfIFormlet(mP);},WithTextLabel:function(mQ,mR){return O.WithLabel(function(){var mT,mU;mT=f.ofArray([e.Text(mQ)]);mU=e.Tags();return mU.NewTag("label",mT);},mR);},WithValidationFrame:function(mV){return O.WithCustomValidationFrame(T.get_Default(),mV);},WithValidationIcon:function(mW){return O.WithCustomValidationIcon(U.get_Default(),mW);},WrapFormlet:function(mX,mY){var mZ;mZ=function(){var m1,m2,m3,m4,m5;m1=r.WithLayoutOrDefault(mY);m2=r.BuildForm(m1);m3=m1.get_Layout().Apply.call(null,m2.Body).$0;m3[1];m4=m3[0];m5=(mX(m2.State))(m4);return[m5,function(){return m2.Notify.call(null,null);},m2.State];};return q.MkFormlet(mZ);}},Formlet:{ApplyLayout:function(m7){var m8,m9;m8=q.BaseFormlet().ApplyLayout(m7);m9=q.PropagateRenderFrom(m7,m8);return q.OfIFormlet(m9);},Bind:function(m_,m$){var na,nb,ne,nf;na=q.BaseFormlet();nb=function(nc){var nd;nd=m$(nc);return nd;};ne=na.Bind(m_,nb);nf=q.PropagateRenderFrom(m_,ne);return q.OfIFormlet(nf);},BindWith:function(ng,nh,ni){var nj,nk,nm,nn;nj=q.BaseFormlet();nk=function(nl){return ni(nl);};nm=nj.BindWith(ng,nh,nk);nn=q.PropagateRenderFrom(nh,nm);return q.OfIFormlet(nn);},BuildForm:function(no){return q.BaseFormlet().BuildForm(no);},BuildFormlet:function(np){return q.MkFormlet(np);},Choose:function(nq){var nr,ns,ny,nz,nA,nP,nQ,nS,nT;nr={contents:0};ns=function(nt){var nu,nw,nx;nu=function(nv){s.Increment(nr);return[nv,nr.contents];};nw=r.Map(nu,nt);nx=r.InitWithFailure(nw);return r.LiftResult(nx);};ny=v.map(ns,nq);nz=r.Sequence(ny);nA=function(nB){var nC,nG,nH,nK,nL,nM;nC=function(nD){var nE,nF;if(nD.$==0){nF=nD.$0;nE={$:1,$0:nF};}else{nE={$:0};}return nE;};nG=f.choose(nC,nB);nH=$.Tupled(function(nI){var nJ;nI[0];nJ=nI[1];return nJ;});nK=f.sortBy(nH,nG);nL=f.rev(nK);nM=$.Tupled(function(nN){var nO;nO=nN[0];nN[1];return{$:1,$0:nO};});return v.tryPick(nM,nL);};nP=r.Map(nA,nz);nQ=function(nR){return nR.$==1;};nS=q.Validator().Is(nQ,"",nP);nT=function(nU){return nU.$0;};return r.Map(nT,nS);},Delay:function(nV){var nW;nW=q.BaseFormlet().Delay(function(){return nV(null);});return q.OfIFormlet(nW);},Deletable:function(nY){var nZ,n0;nZ=q.BaseFormlet().Deletable(nY);n0=q.PropagateRenderFrom(nY,nZ);return q.OfIFormlet(n0);},Do:$.Field(function(){return W.New();}),Empty:function(){var n1;n1=q.BaseFormlet().Empty();return q.OfIFormlet(n1);},FailWith:function(n2){var n3;n3=q.BaseFormlet().FailWith(n2);return q.OfIFormlet(n3);},FlipBody:function(n4){var n5,n6;n5=q.BaseFormlet().FlipBody(n4);n6=q.PropagateRenderFrom(n4,n5);return q.OfIFormlet(n6);},Flowlet:function(n7){var n8,n9,n_,n$;n8=q.BaseFormlet();n9=q.Layout().get_Flowlet();n_=n8.WithLayout(n9,n7);n$=q.PropagateRenderFrom(n7,n_);return q.OfIFormlet(n$);},Horizontal:function(oa){var ob,oc,od,oe;ob=q.BaseFormlet();oc=q.Layout().get_Horizontal();od=ob.WithLayout(oc,oa);oe=q.PropagateRenderFrom(oa,od);return q.OfIFormlet(oe);},InitWith:function(of,og){var oh,oi,oj;oh=q.BaseFormlet();oi=oh.InitWith(of,og);oj=q.PropagateRenderFrom(og,oi);return q.OfIFormlet(oj);},InitWithFailure:function(ok){var ol,om;ol=q.BaseFormlet().InitWithFailure(ok);om=q.PropagateRenderFrom(ok,ol);return q.OfIFormlet(om);},Join:function(on){var oo,oq,or,os,ot;oo=function(op){return op;};oq=r.Map(oo,on);or=q.BaseFormlet();os=or.Join(oq);ot=q.PropagateRenderFrom(on,os);return q.OfIFormlet(ot);},LiftResult:function(ou){var ov,ow;ov=q.BaseFormlet().LiftResult(ou);ow=q.PropagateRenderFrom(ou,ov);return q.OfIFormlet(ow);},Map:function(ox,oy){var oz,oA,oB;oz=q.BaseFormlet();oA=oz.Map(ox,oy);oB=q.PropagateRenderFrom(oy,oA);return q.OfIFormlet(oB);},MapBody:function(oC,oD){var oE,oF,oG;oE=q.BaseFormlet();oF=oE.MapBody(oC,oD);oG=q.PropagateRenderFrom(oD,oF);return q.OfIFormlet(oG);},MapElement:function(oH,oI){var oJ,oK,oM,oN;oJ=q.BaseFormlet();oK=function(oL){return $.New(c,{Element:oH(oL.Element),Label:oL.Label});};oM=oJ.MapBody(oK,oI);oN=q.PropagateRenderFrom(oI,oM);return q.OfIFormlet(oN);},MapResult:function(oO,oP){var oQ,oR,oS;oQ=q.BaseFormlet();oR=oQ.MapResult(oO,oP);oS=q.PropagateRenderFrom(oP,oR);return q.OfIFormlet(oS);},Never:function(){var oT;oT=q.BaseFormlet().Never();return q.OfIFormlet(oT);},New:function(oU){var oV;oV=q.BaseFormlet().New(oU);return q.OfIFormlet(oV);},OfElement:function(oW){var oX;oX=function(){var oZ;oZ=oW(null);return[oZ,function(){},q.RX().Return($.New(l,{$:0,$0:null}))];};return q.MkFormlet(oX);},Render:function(o1){var o2;o2=o1.Run(function(){});return q.PropagateRenderFrom(o1,o2);},Replace:function(o4,o5){var o6,o7,o9,o_;o6=q.BaseFormlet();o7=function(o8){return o5(o8);};o9=o6.Replace(o4,o7);o_=q.PropagateRenderFrom(o4,o9);return q.OfIFormlet(o_);},ReplaceFirstWithFailure:function(o$){var pa,pb;pa=q.BaseFormlet().ReplaceFirstWithFailure(o$);pb=q.PropagateRenderFrom(o$,pa);return q.OfIFormlet(pb);},Return:function(pc){var pd;pd=q.BaseFormlet().Return(pc);return q.OfIFormlet(pd);},ReturnEmpty:function(pe){var pf;pf=q.BaseFormlet().ReturnEmpty(pe);return q.OfIFormlet(pf);},Run:function(pg,ph){return ph.Run(pg);},SelectMany:function(pi){var pj,pl,pm,pn,po;pj=function(pk){return pk;};pl=r.Map(pj,pi);pm=q.BaseFormlet();pn=pm.SelectMany(pl);po=q.PropagateRenderFrom(pi,pn);return q.OfIFormlet(po);},Sequence:function(pp){var pq,ps,pt,pu;pq=function(pr){return pr;};ps=v.map(pq,pp);pt=q.BaseFormlet();pu=pt.Sequence(ps);return q.OfIFormlet(pu);},Switch:function(pv){var pw,py,pz,pA,pB;pw=function(px){return px;};py=r.Map(pw,pv);pz=q.BaseFormlet();pA=pz.Switch(py);pB=q.PropagateRenderFrom(pv,pA);return q.OfIFormlet(pB);},Vertical:function(pC){var pD,pE,pF,pG;pD=q.BaseFormlet();pE=q.Layout().get_Vertical();pF=pD.WithLayout(pE,pC);pG=q.PropagateRenderFrom(pC,pF);return q.OfIFormlet(pG);},WithCancelation:function(pH,pI){var pJ,pK,pL;pJ=q.BaseFormlet();pK=pJ.WithCancelation(pH,pI);pL=q.PropagateRenderFrom(pH,pK);return q.OfIFormlet(pL);},WithLabel:function(pM,pN){var pO,pP,pR,pS;pO=q.BaseFormlet();pP=function(pQ){return $.New(c,{Element:pQ.Element,Label:pM});};pR=pO.MapBody(pP,pN);pS=q.PropagateRenderFrom(pN,pR);return q.OfIFormlet(pS);},WithLayout:function(pT,pU){var pV,pW,pX;pV=q.BaseFormlet();pW=pV.WithLayout(pT,pU);pX=q.PropagateRenderFrom(pU,pW);return q.OfIFormlet(pX);},WithLayoutOrDefault:function(pY){var pZ,p0;pZ=q.BaseFormlet().WithLayoutOrDefault(pY);p0=q.PropagateRenderFrom(pY,pZ);return q.OfIFormlet(p0);},WithNotification:function(p1,p2){var p3,p4,p5;p3=q.BaseFormlet();p4=p3.WithNotification(p1,p2);p5=q.PropagateRenderFrom(p2,p4);return q.OfIFormlet(p5);},WithNotificationChannel:function(p6){var p7,p8;p7=q.BaseFormlet().WithNotificationChannel(p6);p8=q.PropagateRenderFrom(p6,p7);return q.OfIFormlet(p8);}},FormletBuilder:$.Class({Bind:function(p9,p_){var p$,qa,qd,qe;p$=q.BaseFormlet();qa=function(qb){var qc;qc=p_(qb);return qc;};qd=p$.Bind(p9,qa);qe=q.PropagateRenderFrom(p9,qd);return q.OfIFormlet(qe);},Delay:function(qf){var qg;qg=q.BaseFormlet().Delay(function(qh){return qf(qh);});return q.OfIFormlet(qg);},Return:function(qi){var qj;qj=q.BaseFormlet().Return(qi);return q.OfIFormlet(qj);},ReturnFrom:function(qk){return q.OfIFormlet(qk);}},{New:function(){return $.New(this,{});}}),Layout:{FormRowConfiguration:$.Class({},{get_Default:function(){return $.New(Y,{Padding:{$:0},Color:{$:0},Class:{$:0},Style:{$:0},LabelConfiguration:{$:0}});}}),LabelConfiguration:$.Class({},{get_Default:function(){return $.New(Z,{Align:{$:0},VerticalAlign:{$:1},Placement:{$:0}});}}),Padding:$.Class({},{get_Default:function(){return $.New(_0,{Left:{$:0},Right:{$:0},Top:{$:0},Bottom:{$:0}});}})},LayoutProvider:$.Class({ColumnLayout:function(ql){var qm,qn,qx=this;qm=this.LayoutUtils;qn=function(){var qp,qq,qr,qs,qE;qp=e.TR($.New(m,{$:0}));qq=e.Table(f.ofArray([e.TBody(f.ofArray([qp]))]));qr=N.NewElementStore();qs=function(qt){return function(qu){var qv,qw,qy,qz,qA;qv=qu.Element.get_Id();qw=e.TD(f.ofArray([e.Table(f.ofArray([e.TBody(f.ofArray([qx.MakeRow(ql,qt,qu)]))]))]));qy=o(qp.Body);qz={contents:0};qA={contents:false};qy.children().each(function(){var qB,qC;qB=o(this);if(qt===qz.contents){o(qw.Body).insertBefore(qB);qw.Render();qC=void(qA.contents=true);}else{qC=null;}return s.Increment(qz);});!qA.contents?qp.AppendI(qw):null;return qr.RegisterElement(qv,function(){return qw["HtmlProvider@31"].Remove(qw.Body);});};};qE=function(qF){var qG,qH;qG=_1.Get(qF);while(qG.MoveNext()){qH=qG.get_Current();qr.Remove(qH.Element.get_Id());}return;};return{Body:$.New(c,{Element:qq,Label:{$:0}}),SyncRoot:null,Insert:qs,Remove:qE};};return qm.New(qn);},HorizontalAlignElem:function(qI,qJ){var qK,qL,qM;qK=qI.$==0?"left":"right";qL=e.Attr();qM="float:"+qK+";";return n.add(e.Div(f.ofArray([qL.NewAttr("style",qM)])),f.ofArray([qJ]));},LabelLayout:function(qN){var qO,qP;qO=Y.get_Default();qP={$:1,$0:qN};return this.RowLayout($.New(Y,{Padding:qO.Padding,Color:qO.Color,Class:qO.Class,Style:qO.Style,LabelConfiguration:qP}));},MakeLayout:function(qQ){var qR,qS;qR=this.LayoutUtils;qS=function(){var qU,qV,qW,q4;qU=qQ(null);qV=N.NewElementStore();qW=function(qX){return function(qY){var qZ,q0;qZ=qY.Element.get_Id();q0=(qU.Insert.call(null,qX))(qY);return qV.RegisterElement(qZ,function(){var q2,q3;q2=_1.Get(q0);while(q2.MoveNext()){q3=q2.get_Current();q3["HtmlProvider@31"].Remove(q3.Body);}return;});};};q4=function(q5){var q6,q7;q6=_1.Get(q5);while(q6.MoveNext()){q7=q6.get_Current();qV.Remove(q7.Element.get_Id());}return;};return{Body:$.New(c,{Element:qU.Panel,Label:{$:0}}),SyncRoot:null,Insert:qW,Remove:q4};};return qR.New(qS);},MakeRow:function(q8,q9,q_){var q$,ra,rb,rd,re,rg,rh,ri,rk,rl,rm,ro,rp,rq,rs,rt,ru,rZ,r0,r1,r2,r3,r4,r5,r6,r8,r9,r_,r$,sa,sb,sc,sd,se,sf,sg,sj,sk,sl,sm,sp,sq,sr,ss,su,sv,sw,sx,sy,sB,sC,sD,sE;q$=q8.Padding;ra=_0.get_Default();rb=function(rc){return rc;};rd=w.Maybe(ra,rb,q$);re=function(rf){return rf;};rg=rd.Left;rh=w.Maybe(0,re,rg);ri=function(rj){return rj;};rk=rd.Top;rl=w.Maybe(0,ri,rk);rm=function(rn){return rn;};ro=rd.Right;rp=w.Maybe(0,rm,ro);rq=function(rr){return rr;};rs=rd.Bottom;rt=w.Maybe(0,rq,rs);ru=function(rv){return function(rw){return function(rx){return function(ry){return function(rz){return function(rA){return function(rB){var rC,rD,rH,rK,rL,rM,rP,rQ,rR,rS,rT,rU,rV,rW,rX,rY;rC=f.ofArray([["padding-left: ",rv],["padding-top: ",rw],["padding-right: ",rx],["padding-bottom: ",ry]]);rD=$.Tupled(function(rE){var rF,rG;rF=rE[0];rG=rE[1];return rF+$$.String(rG)+"px;";});rH=function(rI){return function(rJ){return rI+rJ;};};rK=f.map(rD,rC);rL=v.reduce(rH,rK);rM=function(rN){var rO;rO=rN.$==1?"middle":rN.$==2?"bottom":"top";return"vertical-align: "+rO+";";};rP=w.Maybe("",rM,rA);rQ=e.Attr();rR=rL+";"+rP;rS=rQ.NewAttr("style",rR);if(rz){rV=e.Attr();rU=f.ofArray([rV.NewAttr("colspan","2")]);}else{rU=$.New(m,{$:0});}rT=rU;rW=$.New(m,{$:1,$0:rS,$1:rT});rX=f.ofArray([rB]);rY=f.append(rW,rX);return e.TD(rY);};};};};};};};rZ=q_.Element;r0=q_.Label;if(r0.$==1){r3=r0.$0;r4=q8.LabelConfiguration;r5=Z.get_Default();r6=function(r7){return r7;};r8=w.Maybe(r5,r6,r4);r9=r8.Align;r_=r3(null);r$=this.HorizontalAlignElem(r9,r_);sa=r8.Placement;if(sa.$==3){sc=w.InTable(f.ofArray([f.ofArray([rZ]),f.ofArray([r$])]));sb=f.ofArray([((((((ru(rh))(rl))(rp))(rt))(true))({$:0}))(sc)]);}else{if(sa.$==0){sb=f.ofArray([((((((ru(rh))(rl))(0))(rt))(false))({$:1,$0:r8.VerticalAlign}))(r$),((((((ru(0))(rl))(rp))(rt))(false))({$:0}))(rZ)]);}else{if(sa.$==1){sb=f.ofArray([((((((ru(rh))(rl))(0))(rt))(false))({$:1,$0:r8.VerticalAlign}))(rZ),((((((ru(0))(rl))(rp))(rt))(false))({$:0}))(r$)]);}else{sd=w.InTable(f.ofArray([f.ofArray([r$]),f.ofArray([rZ])]));sb=f.ofArray([((((((ru(rh))(rl))(rp))(rt))(true))({$:0}))(sd)]);}}}r2=sb;}else{r2=f.ofArray([((((((ru(rh))(rl))(rp))(rt))(true))({$:0}))(rZ)]);}r1=r2;se=q8.Class;sf=$.New(m,{$:0});sg=function(sh){var si;si=sh(q9);return f.ofArray([e.Attr().Class(si)]);};sj=w.Maybe(sf,sg,se);sk=q8.Color;sl=$.New(m,{$:0});sm=function(sn){var so;so=sn(q9);return f.ofArray(["background-color: "+so]);};sp=w.Maybe(sl,sm,sk);sq=q8.Style;sr=$.New(m,{$:0});ss=function(st){return f.ofArray([st(q9)]);};su=w.Maybe(sr,ss,sq);sv=f.append(sp,su);if(sv.$==0){sx=$.New(m,{$:0});}else{sy=v.reduce(function(sz){return function(sA){return sz+";"+sA;};},sv);sB=e.Attr();sx=f.ofArray([sB.NewAttr("style",sy)]);}sw=sx;sC=f.append(sw,r1);sD=f.append(sw,sC);sE=f.append(sj,sD);return e.TR(sE);},RowLayout:function(sF){var sG,sH,sR=this;sG=this.LayoutUtils;sH=function(){var sJ,sK,sL,sM,sY;sJ=e.TBody($.New(m,{$:0}));sK=e.Table(f.ofArray([sJ]));sL=N.NewElementStore();sM=function(sN){return function(sO){var sP,sQ,sS,sT,sU;sP=sO.Element.get_Id();sQ=sR.MakeRow(sF,sN,sO);sS=o(sJ.Body);sT={contents:0};sU={contents:false};sS.children().each(function(){var sV,sW;sV=o(this);if(sN===sT.contents){o(sQ.Body).insertBefore(sV);sQ.Render();sW=void(sU.contents=true);}else{sW=null;}return s.Increment(sT);});!sU.contents?sJ.AppendI(sQ):null;return sL.RegisterElement(sP,function(){return sQ["HtmlProvider@31"].Remove(sQ.Body);});};};sY=function(sZ){var s0,s1;s0=_1.Get(sZ);while(s0.MoveNext()){s1=s0.get_Current();sL.Remove(s1.Element.get_Id());}return;};return{Body:$.New(c,{Element:sK,Label:{$:0}}),SyncRoot:null,Insert:sM,Remove:sY};};return sG.New(sH);},VerticalAlignedTD:function(s2,s3){var s4,s5,s6,s7;s4=s2.$==1?"middle":s2.$==2?"bottom":"top";s5=e.TD(f.ofArray([s3]));s6=s5["HtmlProvider@31"];s7=s5.Body;s6.SetCss(s7,"vertical-align",s4);return s5;},get_Flowlet:function(){var s8;s8=function(){var s_,s$;s_=e.Div($.New(m,{$:0}));s$=function(){return function(tb){var tc,td;tc=tb.Label.$==1?tb.Label.$0.call(null,null):e.Span($.New(m,{$:0}));td=w.InTable(f.ofArray([f.ofArray([tc,e.Div(f.ofArray([tb.Element]))])]));s_["HtmlProvider@31"].Clear(s_.Body);s_.AppendI(td);return f.ofArray([td]);};};return{Insert:s$,Panel:s_};};return this.MakeLayout(s8);},get_Horizontal:function(){return this.ColumnLayout(Y.get_Default());},get_Vertical:function(){return this.RowLayout(Y.get_Default());}},{New:function(te){var tf;tf=$.New(this,{});tf.LayoutUtils=te;return tf;}}),Utils:{InTable:function(tg){var th,tm,tn;th=function(ti){var tj,tl;tj=function(tk){return e.TD(f.ofArray([tk]));};tl=f.map(tj,ti);return e.TR(tl);};tm=f.map(th,tg);tn=e.TBody(tm);return e.Table(f.ofArray([tn]));},MapOption:function(to,tp){var tq,tr;if(tp.$==1){tr=tp.$0;tq={$:1,$0:to(tr)};}else{tq={$:0};}return tq;},Maybe:function(ts,tt,tu){var tv,tw;if(tu.$==0){tv=ts;}else{tw=tu.$0;tv=tt(tw);}return tv;}}}}}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.WebSharper);b=$.Safe(a.Formlet);c=$.Safe(b.Body);d=$.Safe(a.Html);e=$.Safe(d.Default);f=$.Safe(a.List);g=$.Safe(b.Controls);h=$.Safe($$.IntelliFactory.Reactive);i=$.Safe(h.HotStream);j=$.Safe($$.IntelliFactory.Formlet);k=$.Safe(j.Base);l=$.Safe(k.Result);m=$.Safe(f.T);n=$.Safe(d.Operators);o=$.Safe($$.jQuery);p=$.Safe(d.EventsPervasives);q=$.Safe(b.Data);r=$.Safe(b.Formlet);s=$.Safe(a.Operators);t=$.Safe(b.CssConstants);u=$.Safe($$.Math);v=$.Safe(a.Seq);w=$.Safe(b.Utils);x=$.Safe(k.Tree);y=$.Safe(x.Edit);z=$.Safe(k.Form);A=$.Safe(a.Arrays);B=$.Safe(a.IntrinsicFunctionProxy);C=$.Safe(k.FormletProvider);D=$.Safe(q.Formlet);E=$.Safe(a.Util);F=$.Safe(b.LayoutProvider);G=$.Safe(k.LayoutUtils);H=$.Safe(h.Reactive);I=$.Safe(k.Validator);J=$.Safe(q.ValidatorProvidor);K=$.Safe($$.RegExp);L=$.Safe(a.Collections);M=$.Safe(L.Dictionary);N=$.Safe(b.ElementStore);O=$.Safe(b.Enhance);P=$.Safe(O.FormButtonConfiguration);Q=$.Safe(O.FormContainerConfiguration);R=$.Safe(O.Padding);S=$.Safe(O.ManyConfiguration);T=$.Safe(O.ValidationFrameConfiguration);U=$.Safe(O.ValidationIconConfiguration);V=$.Safe($$.JSON);W=$.Safe(b.FormletBuilder);X=$.Safe(b.Layout);Y=$.Safe(X.FormRowConfiguration);Z=$.Safe(X.LabelConfiguration);_0=$.Safe(X.Padding);return _1=$.Safe(a.Enumerator);});$.OnLoad(function(){r.Do();q.Validator();q.RX();q.Layout();q.DefaultLayout();t.InputTextClass();return;});}());
